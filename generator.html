<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PeruHop Review Generator</title>

  <!-- 1️⃣  Load the Adobe Express Embed SDK (drops CCEverywhere on window) -->
  <script src="https://cc-embed.adobe.com/sdk/v4/CCEverywhere.js"></script>
</head>

<body style="margin:0;"></body>

<!-- 2️⃣  Initialise the SDK and open your template -->
<script type="module">
  // Confirm the SDK file really loaded
  if (!window.CCEverywhere) {
    alert("SDK did not load");                 // remove later
    throw new Error("SDK missing");
  }

  // Init
  const { editor } = await window.CCEverywhere.initialize({
    clientId : "b019b4110f86434ebaa727e50f4d5cf1",   // ← your Embed SDK key
    appName  : "PeruHop Generator"
  });

  // Open the template (use the full URN because it’s an asset, not a /project/)
  await editor.createWithTemplate({
    templateId : "urn:aaid:sc:US:e257f8fe-9e32-4db6-81f3-8277cbbfda12",
    variables  : {
      pass  : "Full South to Cusco",
      title : "Ultimate Peru Experience!",
      review: "I did the full south…",
      name  : "Jack D",
      date  : "Jun 2023"
    }
  });

  // Handle Publish
  editor.onPublish(({ outputs }) => {
    const png = outputs?.[0]?.url;
    console.log("PNG ready →", png);
    alert(`✅ Graphic exported!\n${png}`);
    // later: POST png to your n8n webhook here
  });
</script>
</html>
